import{r as s}from"./app-BHhGHejH.js";import{a as A}from"./index-DGncf60G.js";function g(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function R(...n){return e=>{let t=!1;const r=n.map(o=>{const a=g(o,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():g(n[o],null)}}}}function T(...n){return s.useCallback(R(...n),n)}function y(n,e){return s.useReducer((t,r)=>e[t][r]??t,n)}var P=n=>{const{present:e,children:t}=n,r=h(e),o=typeof t=="function"?t({present:r.isPresent}):s.Children.only(t),a=T(r.ref,v(o));return typeof t=="function"||r.isPresent?s.cloneElement(o,{ref:a}):null};P.displayName="Presence";function h(n){const[e,t]=s.useState(),r=s.useRef({}),o=s.useRef(n),a=s.useRef("none"),N=n?"mounted":"unmounted",[p,u]=y(N,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const i=l(r.current);a.current=p==="mounted"?i:"none"},[p]),A(()=>{const i=r.current,f=o.current;if(f!==n){const d=a.current,c=l(i);n?u("MOUNT"):c==="none"||(i==null?void 0:i.display)==="none"?u("UNMOUNT"):u(f&&d!==c?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,u]),A(()=>{if(e){let i;const f=e.ownerDocument.defaultView??window,m=c=>{const O=l(r.current).includes(c.animationName);if(c.target===e&&O&&(u("ANIMATION_END"),!o.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",i=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},d=c=>{c.target===e&&(a.current=l(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(i),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:s.useCallback(i=>{i&&(r.current=getComputedStyle(i)),t(i)},[])}}function l(n){return(n==null?void 0:n.animationName)||"none"}function v(n){var r,o;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{P};
