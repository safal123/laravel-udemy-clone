import{r as n,j as e,R as d,c as f}from"./app-D3Bc6xah.js";import{F as S}from"./FileInput-G5rfSGIa.js";import{O as g,C as x,a as V,T as h,D as j,R as T,c as k,P as F}from"./index-Bar9eaF4.js";import{c as i}from"./utils-8RyR4BqC.js";import{X as P}from"./x-Ba_VceXe.js";import{J as u}from"./index-CAzHSJj3.js";import{V as z}from"./video-CcrAOdRK.js";import"./button-DlP2bF3_.js";import"./index-BZ36hmY6.js";import"./index-yFKY4byg.js";import"./index-BCqpTU4Y.js";import"./createLucideIcon-DtTy6nl0.js";import"./loader-BwD6kZuG.js";import"./component-CcYjSrfE.js";import"./index-B_nNEXnh.js";import"./index-B5gmlZZa.js";import"./index-DvutNgEp.js";const O=T,E=k,H=F,y=n.forwardRef(({className:a,...t},o)=>e.jsx(g,{ref:o,className:i("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t}));y.displayName=g.displayName;const N=n.forwardRef(({className:a,children:t,...o},r)=>e.jsxs(H,{children:[e.jsx(y,{}),e.jsxs(x,{ref:r,className:i("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[t,e.jsxs(V,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));N.displayName=x.displayName;const w=({className:a,...t})=>e.jsx("div",{className:i("flex flex-col space-y-1.5 text-center sm:text-left",a),...t});w.displayName="DialogHeader";const v=n.forwardRef(({className:a,...t},o)=>e.jsx(h,{ref:o,className:i("text-lg font-semibold leading-none tracking-tight",a),...t}));v.displayName=h.displayName;const I=n.forwardRef(({className:a,...t},o)=>e.jsx(j,{ref:o,className:i("text-sm text-muted-foreground",a),...t}));I.displayName=j.displayName;const te=({chapter:a})=>{const[t,o]=d.useState(!1),[r,p]=d.useState(null),[b,m]=d.useState(""),[D,c]=d.useState(!1),R=async()=>{console.log("uploading video");try{if(c(!0),!r)return;const s=await f.post("/s3/get-signed-url",{fileName:a.id,path:"courses/chapters/videos"});if(!(await fetch(s.data.url,{method:"PUT",body:r})).ok)throw new Error("Failed to upload video to S3");await f.post(route("teachers.courses.chapters.video",{course:a.course_id,chapter:a.id})),u("Video uploaded successfully"),C()}catch(s){console.log(s),u.error("Failed to upload video")}finally{c(!1)}},U=s=>{const l=s.target.files[0];l&&(p(l),m(URL.createObjectURL(l)))},C=()=>{m(""),p(null),c(!1)};return e.jsxs(O,{children:[e.jsx(E,{children:e.jsx(z,{onClick:()=>o(!0),className:"w-6 h-6 cursor-pointer text-green-600"})}),e.jsxs(N,{className:"max-w-7xl",children:[e.jsx(w,{children:e.jsx(v,{children:"Chapter Video"})}),e.jsx("div",{className:"rounded-md",children:e.jsx(S,{accept:"video/*",previewUrl:b,objectUrl:a.video_url,loading:D,uploadToS3:R,onChange:U,name:"video"})})]})]})};export{te as default};
